# =============================================================================
# CONFIGURACIÓN DEL SISTEMA CRYPTOTRACE - DESARROLLO (LOCAL)
# =============================================================================
# Archivo actualizado con migración a SMTP_* e IMAP_* (Opción 1)
# Copia este contenido a tu archivo .env

# -----------------------------------------------------------------------------
# BASE DE DATOS POSTGRESQL
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://cryptotrace_user:cryptotrace_pass@db:5432/cryptotrace_db

# Variables adicionales de base de datos (opcionales, Django las extrae de DATABASE_URL)
DB_NAME=cryptotrace_db
DB_USER=cryptotrace_user
DB_PASSWORD=cryptotrace_pass
DB_HOST=db
DB_PORT=5432

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE EMAIL (GMAIL) - UNIFICADA PARA TODO EL SISTEMA
# -----------------------------------------------------------------------------
# IMPORTANTE: Migrado de EMAIL_* a SMTP_* e IMAP_* para consistencia con hps-system
# La misma cuenta de correo se usa para todo el sistema (hps-system + cryptotrace)

# SMTP (Envío de correos) - Migrado desde EMAIL_*
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu_email@gmail.com
SMTP_PASSWORD=tu_contraseña_aplicacion_gmail
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@hps-system.com
SMTP_FROM_NAME=Sistema HPS
SMTP_REPLY_TO=tu_email@gmail.com
# NOTA: DEFAULT_FROM_EMAIL se construye automáticamente como: "{SMTP_FROM_NAME} <{SMTP_USER}>"
# Si SMTP_FROM_EMAIL está definido, se usa ese valor directamente

# IMAP (Recepción y monitorización de correos)
# IMPORTANTE: Si usas la misma cuenta para SMTP e IMAP, puedes NO definir IMAP_USER e IMAP_PASSWORD
# Django automáticamente usará SMTP_USER y SMTP_PASSWORD como fallback (ver settings.py línea 265-266)
# Si usas cuentas diferentes, define los valores explícitamente:
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
# IMAP_USER=tu_email@gmail.com  # Opcional: solo si es diferente de SMTP_USER
# IMAP_PASSWORD=tu_contraseña_aplicacion_gmail  # Opcional: solo si es diferente de SMTP_PASSWORD
IMAP_MAILBOX=INBOX

# -----------------------------------------------------------------------------
# CONFIGURACIÓN REDIS Y CELERY
# -----------------------------------------------------------------------------
# Redis (Compartido para Celery broker y backend)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# CONFIGURACIÓN OPENAI (Agente IA)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-tu-openai-api-key-aqui
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DEL FRONTEND (REQUERIDAS EN PRODUCCIÓN)
# -----------------------------------------------------------------------------
# IMPORTANTE: Estas variables son REQUERIDAS en producción (sin fallbacks)
FRONTEND_URL=http://localhost:3000
# URL del sistema HPS (para emails de credenciales HPS y redirecciones)
HPS_SYSTEM_URL=http://localhost:3001
# URL del sistema HPS para el frontend de Next.js (CryptoTrace)
NEXT_PUBLIC_HPS_SYSTEM_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# CONFIGURACIÓN CORS (REQUERIDAS EN PRODUCCIÓN)
# -----------------------------------------------------------------------------
# Lista de orígenes permitidos separados por comas
# Ejemplo: https://cryptotrace.idiaicox.com,https://www.cryptotrace.idiaicox.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://cryptotrace-backend:8080
# Permitir todos los orígenes (solo en desarrollo, False en producción)
CORS_ALLOW_ALL_ORIGINS=True

# -----------------------------------------------------------------------------
# CONFIGURACIÓN JWT
# -----------------------------------------------------------------------------
SECRET_KEY=django-insecure-change-this-in-production
JWT_SECRET_KEY=django-insecure-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=480
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DJANGO (REQUERIDAS EN PRODUCCIÓN)
# -----------------------------------------------------------------------------
# IMPORTANTE: Estas variables son REQUERIDAS en producción (sin fallbacks)
DEBUG=True
# Lista de hosts permitidos separados por comas
# Ejemplo: cryptotrace.idiaicox.com,www.cryptotrace.idiaicox.com
ALLOWED_HOSTS=localhost,127.0.0.1,backend,cryptotrace-backend

# -----------------------------------------------------------------------------
# INSTRUCCIONES PARA GMAIL
# -----------------------------------------------------------------------------
# 1. Activa la verificación en 2 pasos en tu cuenta de Gmail
# 2. Ve a "Gestionar tu cuenta de Google" > Seguridad > Contraseñas de aplicaciones
# 3. Genera una nueva contraseña de aplicación para "CryptoTrace"
# 4. Usa esa contraseña (16 caracteres) en SMTP_PASSWORD e IMAP_PASSWORD
# 5. NO uses tu contraseña normal de Gmail
# 6. La misma contraseña de aplicación se usa para SMTP e IMAP

# -----------------------------------------------------------------------------
# NOTAS DE MIGRACIÓN
# -----------------------------------------------------------------------------
# - Las variables EMAIL_* antiguas (EMAIL_HOST, EMAIL_PORT, etc.) ya no son necesarias
# - Django settings.py acepta ambas nomenclaturas con fallback, pero se recomienda usar SMTP_* e IMAP_*
# - Si necesitas mantener compatibilidad temporal, puedes dejar las EMAIL_* pero no son necesarias
