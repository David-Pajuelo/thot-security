# =============================================================================
# CONFIGURACIÓN DEL SISTEMA CRYPTOTRACE - DESARROLLO (LOCAL)
# =============================================================================
# Copia este archivo a .env y ajusta los valores según tu entorno local

# -----------------------------------------------------------------------------
# BASE DE DATOS POSTGRESQL
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://postgres:postgres@db:5432/cryptotrace
DB_NAME=cryptotrace
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DE EMAIL (GMAIL) - UNIFICADA PARA TODO EL SISTEMA
# -----------------------------------------------------------------------------
# IMPORTANTE: Estas variables se usan tanto para SMTP (envío) como IMAP (recepción)
# La misma cuenta de correo se usa para todo el sistema (hps-system + cryptotrace)
# Django settings.py acepta tanto SMTP_* como EMAIL_* (con fallback automático)

# SMTP (Envío de correos)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu_email@gmail.com
SMTP_PASSWORD=tu_contraseña_aplicacion_gmail
SMTP_USE_TLS=true
SMTP_FROM_NAME=CryptoTrace HPS
SMTP_REPLY_TO=tu_email@gmail.com
# NOTA: DEFAULT_FROM_EMAIL se construye automáticamente como: "{SMTP_FROM_NAME} <{SMTP_USER}>"

# IMAP (Recepción y monitorización de correos)
# Si IMAP_USER e IMAP_PASSWORD no se definen, se usan SMTP_USER y SMTP_PASSWORD
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USER=${SMTP_USER}
IMAP_PASSWORD=${SMTP_PASSWORD}
IMAP_MAILBOX=INBOX

# NOTA: Django también acepta las variables EMAIL_* tradicionales como fallback:
# EMAIL_HOST, EMAIL_PORT, EMAIL_HOST_USER, EMAIL_HOST_PASSWORD, EMAIL_USE_TLS
# Pero se recomienda usar SMTP_* e IMAP_* para mantener consistencia con hps-system

# -----------------------------------------------------------------------------
# CONFIGURACIÓN REDIS Y CELERY
# -----------------------------------------------------------------------------
# Redis (Compartido para Celery broker y backend)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0

# Celery Configuration
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DEL FRONTEND
# -----------------------------------------------------------------------------
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# CONFIGURACIÓN JWT
# -----------------------------------------------------------------------------
SECRET_KEY=django-insecure-change-this-in-production
JWT_SECRET_KEY=${SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=480
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# CONFIGURACIÓN DJANGO
# -----------------------------------------------------------------------------
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,backend,cryptotrace-backend

# -----------------------------------------------------------------------------
# INSTRUCCIONES PARA GMAIL
# -----------------------------------------------------------------------------
# 1. Activa la verificación en 2 pasos en tu cuenta de Gmail
# 2. Ve a "Gestionar tu cuenta de Google" > Seguridad > Contraseñas de aplicaciones
# 3. Genera una nueva contraseña de aplicación para "CryptoTrace"
# 4. Usa esa contraseña (16 caracteres) en SMTP_PASSWORD e IMAP_PASSWORD
# 5. NO uses tu contraseña normal de Gmail
# 6. La misma contraseña de aplicación se usa para SMTP e IMAP